@using System.Globalization
@model List<liftoffHealthCare.Models.Vital>


<h1>Your Vitals</h1>

<form asp-controller="vitals" asp-action="add"><input type="submit" value="Add Vital Signs" class="btn btn-danger"/></form>
<br>
<form asp-controller="vitals" asp-action="delete"><input type="submit" value="Delete Vital Signs" class="btn btn-danger"/></form>
<br>
@if (Model.Count == 0)
{
    <p class="text-center">No vital signs saved!</p>
}
else
{
    <table id="vitals-table" class="table table-bordered">
        <tr>
            <th><a asp-action="Index" asp-route-sortOrder="@ViewData["DateSort"]">Date</a></th>
            <th><a asp-action="Index" asp-route-sortOrder="@ViewData["HeartHighLow"]">Heart Rate</a></th>
            <th><a asp-action="Index" asp-route-sortOrder="@ViewData["BPSort"]">Blood Pressure</a></th>
            <th>Medications Taken</th>
        </tr>
        @foreach (var vital in Model)
        {
            <tr>
                <td>@vital.Date.ToString("d", DateTimeFormatInfo.InvariantInfo)</td>
                @if (vital.HeartRate > 135)
                {
                    <td class="vital-high">@vital.HeartRate</td>
                } 
                else if (vital.HeartRate < 55)
                {
                    <td class="vital-low">@vital.HeartRate</td>
                }
                else
                {
                    <td>@vital.HeartRate</td>
                }
                <td>
                    @if (vital.Systolic > 175)
                    {
                        <span class="vital-high">@vital.Systolic</span>
                    } else if (vital.Systolic < 90)
                    {
                        <span class="vital-low">@vital.Systolic</span>
                    } else
                    {
                        <span>@vital.Systolic</span>
                    }
                    <span>/</span>
                    @if (vital.Diastolic > 92)
                    {
                        <span class="vital-high">@vital.Diastolic</span>
                    } else if (vital.Diastolic < 60)
                    {
                        <span class="vital-low">@vital.Diastolic</span>
                    } else
                    {
                        <span>@vital.Diastolic</span>
                    }
                </td>
                <td><a asp-controller="Vitals" asp-action="Details" asp-route-id="@vital.Id" >View</a></td>
                <td><a asp-controller="Vitals" asp-action="Edit" asp-route-id="@vital.Id">Edit</a></td>
            </tr>
        }
    </table> 
}
